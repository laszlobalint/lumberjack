Automate database backup on server (MariaDB on Linux)

Replace {username} with the corresponding OS user!

1. Make sure that MySQL dump executable script is accessable in the central Bin folder:
bash /usr/bin/mysqldump

2. Create a file with MariaDB connection details for root user:

Path: 
/home/${username}/.lumberjack_login.cnf

Content:
[client]
user = lumberjack
password = lumberjack

3. Restrict permissions of the credentials file:
sudo chmod 600 /home/${username}/.lumberjack_login.cnf

4. Create a folder where database backup files will be stored:
mkdir /home/${username}/db_backup

5. Create a cron job file which will create a full backup of the database every day at 01:00 AM:

Path: 
/etc/cron.daily/database_dump
0 1 * * * /usr/bin/mysqldump --defaults-extra-file=/home/{username}/.lumberjack_login.cnf -u root --single-transaction --quick --lock-tables=false lumberjack > /home/${username}/db_backup/db_backup_$(date +\%Y\%m\%d\%H\%M\%S).sql

6. Depending on the operation system, you need to run the cron job service restart command (command can include 'cron' and 'crond' as they are not the same):
sudo service cron reload
sudo service cron restart
sudo systemctl start crond.service
sudo /etc/init.d/cron reload
sudo /etc/init.d/crond reload

######################################################################

Restore database backup on server (MariaDB on Linux)

1. Make sure that MariaDB executable script is accessable in the central Bin folder:
bash /usr/bin/mysql

2. Verify if the chosen database dump file is available and readable for the current user:
ls -l /home${username}/db_backup/db_backup_{chosen_date}.sql

3. Restore a single database dump (no space between -p flag and the password):
mysql -u lumberjack -plumberjack lumberjack < /home${username}/db_backup/db_backup_{chosen_date}.sql

4. Check your database in database administrator console and on using web client!
